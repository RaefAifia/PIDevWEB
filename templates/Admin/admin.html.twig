{% extends 'baseAdmin.html.twig' %}
{% block title %}Formation index{% endblock %}

{% block body %}
    {#
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <link href="{{ asset('https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css') }}" rel="stylesheet"/>

    <input type="text" name="search_text" id="search_text" placeholder="Search by Customer Details" class="form-control" />
    <div id="result"></div>

    <script>
        $(document).ready(function(){

            load_data();

            function load_data(query)
            {
                $.ajax({
                    url : "{{ path('recherche') }}",
                    data : { 'formation' : $(this).val(),
                        success:function(data)
                    {
                        $('#result').html.twig(data);
                    }
                });
            }
            $('#search_text').keyup(function(){
                var search = $(this).val();
                if(search != '')
                {
                    load_data(search);
                }
                else
                {
                    load_data();
                }
            });
        });
    </script>  #}


<h1>Formations</h1>
{#     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script >
        $(function () {
            $("#recherche").keyup(function () {
                $.ajax({
                    url : "{{ path('recherche') }}",
                    data : { 'formation' : $(this).val() }
                }).done(function (response) {
                    var tableau =$(response).find("table");
                    $('.tableau').empty();
                    $('.tableau').append(tableau);

                });
            });
        })
    </script> #}


    {#  <input  class="form-control form-control-sm"   type="text" id="recherche" placeholder="Search ..">
    <button type="button" class="btn btn-warning"><i class="fa fa-warning"></i> Warning</button>
     <a class="btn_4"  href="{{ path('formation_index') }}">toutes les formations</a>#}

    <a class="btn btn-warning" href="{{ path('nonValid') }}"><i class="fa fa-warning"></i>En attente</a>


        <a href="{{ path('Valid') }}"class="btn btn-success"><i class="fa fa-check-circle"></i>Valid√©es</a>
        <a href="{{ path('tri') }}"class="btn btn-info"><i class="fa fa-check-circle"></i>Trier par date </a>

    <section id="team" class="team section-bg">
         <div class="container" >
             <h1> <button type="button" onclick="sortTable()" Trier par date ></button></h1>
        <div class="row justify-content-center">
            <div class="col-5">
        <div class="section-title">


        </div>

                <form method="post" >
                    <input type="text"  class="form-control" name="AfficherClasse" onkeyup="myFunction()" placeholder="recherche"  id="myInput" >
                </form>


        <div class="tableau">

            <table class="table" id="mytable"  >
        <tr>

            <th>Titre</th>
            <th>Niveau</th>
            <th>Description</th>
            <th>Duree</th>
            <th>Langue</th>
            <th>Date</th>
            <th>Image</th>
        </tr>

        <tbody>
        {% for formation in formations %}
            <tr>

                <td>{{ formation.titre }}</td>
                <td>{{ formation.niveau }}</td>
                <td>{{ formation.description }}</td>
                <td>{{ formation.duree }}</td>
                <td>{{ formation.langue }}</td>
                <td>{{ formation.date }}</td>
                <td>{{ formation.image }}</td>
                <td>
                    <a class="btn_2" href="{{ path('formation_showAdmin', {'id': formation.formationId}) }}">Afficher</a>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="7">no records found</td>
            </tr>
        {% endfor %}
        <script>
            function myFunction() {
                var input, filter, table, tr, td, i,j, txtValue;
                input = document.getElementById("myInput");
                filter = input.value.toUpperCase();
                table = document.getElementById("mytable");
                tr = table.getElementsByTagName("tr"); //nom de balise
//   alert(td.length);
                for (i = 0; i < tr.length; i++) {
                    td= tr[i].getElementsByTagName("td")[0];

                    if (td) {
                        txtValue = td.textContent || td.innerText;
                        if (txtValue.toUpperCase().indexOf(filter) > -1) {
                            tr[i].style.display = "";
                        } else {
                            tr[i].style.display = "none";
                        }
                    }
                }
            }


        </script>
        <script>
            function sortTable() {
                var table, rows, switching, i, x, y, shouldSwitch,dir;
                table = document.getElementById("myT");
                switching = true;
                // Set the sorting direction to ascending:


                while (switching) {

                    switching = false;
                    rows = table.rows;

                    for (i = 1; i < (rows.length - 1); i++) {

                        shouldSwitch = false;

                        x = rows[i].getElementsByTagName("TD")[4];
                        y = rows[i + 1].getElementsByTagName("TD")[4];



                        if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {

                            shouldSwitch = true;
                            break;
                        } }

                    if (shouldSwitch) {

                        rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
                        switching = true;
                    }


                }
            }
        </script>
        </tbody>
    </table>


    </div>
    </div>

    </div>

</div>
</div>
</div>
</section>


{% endblock %}

